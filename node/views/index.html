<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Profesional</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f8f9fa;
    }

    /* Sidebar */
    #sidebar {
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      background-color: #343a40;
      color: #fff;
      padding-top: 20px;
    }
    #sidebar .nav-link {
      color: #ddd;
      margin: 5px 0;
      font-weight: 500;
    }
    #sidebar .nav-link:hover {
      color: #fff;
      background-color: #495057;
      border-radius: 8px;
    }

    /* Main content */
    #main-content {
      margin-left: 250px;
      padding: 30px;
    }

    h1 {
      font-weight: 700;
      color: #343a40;
      margin-bottom: 30px;
    }

    .card {
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
      margin-bottom: 30px;
    }

    .card-header {
      font-weight: 600;
      font-size: 1.1rem;
    }

    canvas {
      max-height: 300px;
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <nav id="sidebar" class="d-flex flex-column">
    <h3 class="text-center mb-4">Mi Dashboard</h3>
    <a class="nav-link" href="#">Inicio</a>
    <a class="nav-link" href="#">Productos</a>
    <a class="nav-link" href="#">Ventas</a>
    <a class="nav-link" href="#">CategorÃ­as</a>
    <a class="nav-link" href="#">Promociones</a>
    <a class="nav-link" href="#">Usuarios</a>
    <a class="nav-link" href="#">Cerrar sesiÃ³n</a>
  </nav>

  <!-- Main Content -->
  <div id="main-content">
    <h1>ðŸ“Š Dashboard de Ventas</h1>

    <!-- KPI Cards -->
    <div class="row mb-4">
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Total Ventas</h5>
          <h3 id="totalVentas"></h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Productos Vendidos</h5>
          <h3 id="totalUnidades"></h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Clientes</h5>
          <h3>120</h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card text-center p-3">
          <h5>Producto Top</h5>
          <h3 id="productoTop"></h3>
        </div>
      </div>
    </div>

    <!-- Charts -->
    <div class="row g-4">
      <div class="col-lg-6 col-md-12">
        <div class="card p-3">
          <div class="card-header bg-primary text-white">Top Productos</div>
          <div class="card-body">
            <canvas id="topProductosChart"></canvas>
          </div>
        </div>
      </div>

      <div class="col-lg-6 col-md-12">
        <div class="card p-3">
          <div class="card-header bg-success text-white">Comparativo por CategorÃ­a</div>
          <div class="card-body">
            <canvas id="categoriaChart"></canvas>
          </div>
        </div>
      </div>

      <div class="col-lg-6 col-md-12">
        <div class="card p-3">
          <div class="card-header bg-warning text-dark">Comparativo por GÃ©nero</div>
          <div class="card-body">
            <canvas id="generoChart"></canvas>
          </div>
        </div>
      </div>

      <div class="col-lg-6 col-md-12">
        <div class="card p-3">
          <div class="card-header bg-info text-white">Comparativo por Talla</div>
          <div class="card-body">
            <canvas id="tallaChart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Datos quemados
    const productos = [
      { id:1,nombre:"Camisa Casual",categoria:"Ropa Hombre",genero:"Masculino",talla:"M",precio:40000 },
      { id:2,nombre:"PantalÃ³n Jeans",categoria:"Ropa Hombre",genero:"Masculino",talla:"L",precio:70000 },
      { id:3,nombre:"Chaqueta Deportiva",categoria:"Ropa Mujer",genero:"Femenino",talla:"S",precio:125000 },
      { id:4,nombre:"Blusa Elegante",categoria:"Ropa Mujer",genero:"Femenino",talla:"M",precio:90000 },
      { id:5,nombre:"Zapatos Urbanos",categoria:"Calzado",genero:"Masculino",talla:"42",precio:150000 },
      { id:6,nombre:"Zapatos TacÃ³n",categoria:"Calzado",genero:"Femenino",talla:"38",precio:130000 }
    ];

    const ventas = [
      {productoId:1,cantidad:50},{productoId:2,cantidad:30},{productoId:3,cantidad:20},
      {productoId:4,cantidad:25},{productoId:5,cantidad:15},{productoId:6,cantidad:10},
      {productoId:1,cantidad:30},{productoId:3,cantidad:15}
    ];

    const promociones = [
      {productoId:1,descuento:10,descripcion:"10% en Camisa Casual"},
      {productoId:3,descuento:20,descripcion:"20% en Chaqueta Deportiva"},
      {productoId:5,descuento:15,descripcion:"15% en Zapatos Urbanos"}
    ];

    // Funciones para calcular totales
    function calcularVentasTotales() {
      return productos.map(prod => {
        const ventasProd = ventas.filter(v => v.productoId === prod.id);
        const total_vendido = ventasProd.reduce((acc,v)=>acc+v.cantidad,0);
        const ventas_total = total_vendido * prod.precio;
        return {...prod,total_vendido,ventas:ventas_total};
      });
    }

    function comparativoCategorias() {
      const categorias = [...new Set(productos.map(p=>p.categoria))];
      return categorias.map(cat=>{
        const productosCat = productos.filter(p=>p.categoria===cat);
        let unidades=0,ventas_total=0;
        productosCat.forEach(prod=>{
          const ventasProd = ventas.filter(v=>v.productoId===prod.id);
          unidades+=ventasProd.reduce((acc,v)=>acc+v.cantidad,0);
          ventas_total+=ventasProd.reduce((acc,v)=>acc+v.cantidad*prod.precio,0);
        });
        return {nombre_categoria:cat,unidades_vendidas:unidades,ventas:ventas_total};
      });
    }

    function comparativoGenero() {
      const generos = [...new Set(productos.map(p=>p.genero))];
      return generos.map(g=>{
        const productosGenero = productos.filter(p=>p.genero===g);
        let unidades=0,ventas_total=0;
        productosGenero.forEach(prod=>{
          const ventasProd = ventas.filter(v=>v.productoId===prod.id);
          unidades+=ventasProd.reduce((acc,v)=>acc+v.cantidad,0);
          ventas_total+=ventasProd.reduce((acc,v)=>acc+v.cantidad*prod.precio,0);
        });
        return {genero:g,unidades,ventas:ventas_total};
      });
    }

    function comparativoTalla() {
      const tallas = [...new Set(productos.map(p=>p.talla))];
      return tallas.map(t=>{
        const productosTalla = productos.filter(p=>p.talla===t);
        let unidades=0,ventas_total=0;
        productosTalla.forEach(prod=>{
          const ventasProd = ventas.filter(v=>v.productoId===prod.id);
          unidades+=ventasProd.reduce((acc,v)=>acc+v.cantidad,0);
          ventas_total+=ventasProd.reduce((acc,v)=>acc+v.cantidad*prod.precio,0);
        });
        return {talla:t,unidades,ventas:ventas_total};
      });
    }

    // Datos finales
    const topProductos = calcularVentasTotales();
    const comparativos = {
      byCategoria: comparativoCategorias(),
      byGenero: comparativoGenero(),
      byTalla: comparativoTalla()
    };

    // Actualizar KPIs
    document.getElementById("totalVentas").textContent = "$" + topProductos.reduce((acc,p)=>acc+p.ventas,0).toLocaleString();
    document.getElementById("totalUnidades").textContent = topProductos.reduce((acc,p)=>acc+p.total_vendido,0);
    document.getElementById("productoTop").textContent = topProductos.sort((a,b)=>b.total_vendido-a.total_vendido)[0].nombre;

    // Chart Top Productos
    new Chart(document.getElementById('topProductosChart').getContext('2d'),{
      type:'bar',
      data:{
        labels: topProductos.map(p=>p.nombre),
        datasets:[
          {label:'Unidades Vendidas', data: topProductos.map(p=>p.total_vendido), backgroundColor:'rgba(0,123,255,0.7)'},
          {label:'Ventas ($)', data: topProductos.map(p=>p.ventas), backgroundColor:'rgba(0,200,83,0.7)'}
        ]
      },
      options:{responsive:true,plugins:{legend:{position:'top'}},scales:{y:{beginAtZero:true}}}
    });

    // Chart CategorÃ­a
    new Chart(document.getElementById('categoriaChart').getContext('2d'),{
      type:'doughnut',
      data:{
        labels: comparativos.byCategoria.map(c=>c.nombre_categoria),
        datasets:[{data:comparativos.byCategoria.map(c=>c.unidades_vendidas),backgroundColor:['#28a745','#218838','#17a2b8']}]
      },
      options:{responsive:true}
    });

    // Chart GÃ©nero
    new Chart(document.getElementById('generoChart').getContext('2d'),{
      type:'pie',
      data:{
        labels: comparativos.byGenero.map(g=>g.genero),
        datasets:[{data:comparativos.byGenero.map(g=>g.unidades),backgroundColor:['#ffc107','#e0a800']}]
      },
      options:{responsive:true}
    });

    // Chart Talla
    new Chart(document.getElementById('tallaChart').getContext('2d'),{
      type:'bar',
      data:{
        labels: comparativos.byTalla.map(t=>t.talla),
        datasets:[
          {label:'Unidades Vendidas', data: comparativos.byTalla.map(t=>t.unidades), backgroundColor:'rgba(23,162,184,0.7)'},
          {label:'Ventas ($)', data: comparativos.byTalla.map(t=>t.ventas), backgroundColor:'rgba(108,117,125,0.7)'}
        ]
      },
      options:{responsive:true,plugins:{legend:{position:'top'}},scales:{y:{beginAtZero:true}}}
    });

  </script>

</body>
</html>
